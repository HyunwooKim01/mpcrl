📝 Logging to logs/rl_mpc_20251031_003403.log
🚀 Real-world RL-MPC (CasADi) starting...
✅ MQTT connected → 211.106.231.24:1883
🟢 MQTT connected successfully, subscribed to {'sensor': 'farmA/esp1/sensor', 'disturbance': 'farmA/esp1/disturbance', 'actuator_control': 'farmA/esp1/actuator/control'}
📡 Subscribed topics: {'sensor': 'farmA/esp1/sensor', 'disturbance': 'farmA/esp1/disturbance', 'actuator_control': 'farmA/esp1/actuator/control'}
-------------------------------------------
This is casadi::QRQP
Number of variables:                             244
Number of constraints:                           172
Number of nonzeros in H:                         832
Number of nonzeros in A:                         529
Number of nonzeros in KKT:                      2062
Number of nonzeros in QR(V):                    3055
Number of nonzeros in QR(R):                    5799
✅ RL-MPC loop running...

 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0       4.2   250     3e+02     3     0.047   257         0  
    1     0  -1.3e+06   1.1e-09   314   7.9e-10   108     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.04999997608027655, 'led': 0.0, 'timestamp': 1761838444.1048732}
🏆 reward=-29.0000 | growth=-5.0000 energy=0.0025 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 001] t=1761838444.10 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.05
🏆 Reward = -29.0000
────────────────────────────────────────────
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0      0.05   254     3e+02     3     0.047   257         0  
    1     0   -0.0042   1.6e-09   314   2.6e-09   105     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.049999978858046565, 'led': 0.0, 'timestamp': 1761838449.1067502}
🏆 reward=-29.0000 | growth=-5.0000 energy=0.0025 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 002] t=1761838449.11 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.05
🏆 Reward = -29.0000
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0   2.8e-09   254     3e+02     3     0.047   257         0  
    1     0     3e-11   9.1e-10   300   2.2e-09   105     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.08369467494474868, 'led': 0.0, 'timestamp': 1761838454.109011}
🏆 reward=-29.0001 | growth=-5.0000 energy=0.0070 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 003] t=1761838454.11 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.08
🏆 Reward = -29.0001
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0     0.034   254     3e+02     3     0.047   257         0  
    1     0    -0.002   9.6e-10   258   1.8e-09   117     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.12537701264928675, 'led': 0.0, 'timestamp': 1761838459.1108925}
🏆 reward=-29.0002 | growth=-5.0000 energy=0.0157 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 004] t=1761838459.11 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.13
🏆 Reward = -29.0002
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0     0.042   254     3e+02     3     0.047   257         0  
    1     0   -0.0016   1.8e-09   314   1.2e-09   117     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.16666661015219386, 'led': 0.0, 'timestamp': 1761838464.112905}
🏆 reward=-29.0003 | growth=-5.0000 energy=0.0278 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 005] t=1761838464.11 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.17
🏆 Reward = -29.0003
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0     0.041   254     3e+02     3     0.047   257         0  
    1     0  -0.00051   8.5e-10   300   1.5e-09   117     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.16666661779840197, 'led': 0.0, 'timestamp': 1761838469.1151357}
🏆 reward=-29.0003 | growth=-5.0000 energy=0.0278 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 006] t=1761838469.11 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.17
🏆 Reward = -29.0003
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0   7.6e-09   254     3e+02     3     0.047   257         0  
    1     0   8.7e-10   8.1e-10   314   2.5e-09   105     0.047   257         1  Converged
MESSAGE(sqpmethod): Convergence achieved after 1 iterations
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.16666661779840197, 'led': 0.0, 'timestamp': 1761838474.1171527}
🏆 reward=-29.0003 | growth=-5.0000 energy=0.0278 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 007] t=1761838474.12 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.17
🏆 Reward = -29.0003
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
 Iter  Sing        fk      |pr|   con      |du|   var     min_R   con  last_tau  Note
    0     0         0   8.1e-10   314     3e+02     3     0.047   257         0  
    1     0  -1.1e-09   6.4e-10   314   2.5e-09   105     0.047   257         1  Converged
MESSAGE(sqpmethod): Search direction becomes too small without convergence criteria being met.
📤 Sent actuator command → {'fan': 0.0, 'heater': 0.16666661779840197, 'led': 0.0, 'timestamp': 1761838479.1193545}
🏆 reward=-29.0003 | growth=-5.0000 energy=0.0278 violation=24.0000

────────────────────────────────────────────
⏱ [STEP 008] t=1761838479.12 (Δt=5.0s)
🌡  Temp=0.0°C  💧Hum=0.0%  ☁️CO₂=0ppm  💡Light=0.0lx
🌞  Rad=0W/m²   🌬OutT=15.0°C  💧OutH=50%
⚙️  u_opt → FAN=0.00 | HEATER=0.00 | LED=0.17
🏆 Reward = -29.0003
────────────────────────────────────────────
[WARN] Sensor payload stale (> timeout).
[WARN] Disturbance payload stale (> timeout).
